---
import PageLayout from "@layouts/Page.astro"
import Window from "@components/Window.astro"
import Tag from "@components/Tag.astro"

import type { Frontmatter } from "@types"

const posts = await Astro.glob<Frontmatter>("../*.mdx")
const tags = posts.map((p) => p.frontmatter.tags ?? []).flat()
const uniqueTags = Array.from(new Set(tags))
---

<PageLayout title="Dan's tags">
  <Window
    tabs={[
      { href: "/posts", title: "Posts" },
      { title: "Tags", isActive: true },
    ]}
  >
    <div class="px-4 sm:px-8 lg:px-12 my-12 sm:my-24">
      <header class="page-header">
        <h1 class="page-h1">Discover posts by topic</h1>

        <p class="page-p mt-6">
          Click a tag below to see all posts for that topic.
        </p>
      </header>

      <section class="page-section">
        <ul class="list-none flex flex-wrap items-center gap-2">
          {
            uniqueTags.map((tag) => {
              return (
                <li class="flex">
                  <Tag name={tag}>{tag}</Tag>
                </li>
              )
            })
          }
        </ul>
      </section>
    </div>
  </Window>
</PageLayout>
