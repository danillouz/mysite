---
import Prompt from "@components/Prompt.astro"
import Window from "@components/Window.astro"
import * as config from "@config"
import PageLayout from "@layouts/Page.astro"

const feedsCount = 2
const footerText = `${feedsCount} ${feedsCount > 1 ? "feeds" : "feed"}`
---

<PageLayout
  title={config.PAGES.FEEDS.TITLE}
  description={config.PAGES.FEEDS.DESCRIPTION}
>
  <Window>
    <div class="p-2 font-mono text-sm page-text">
      <div class="max-w-2xl">
        <h1 class="sr-only">{config.PAGES.FEEDS.DESCRIPTION}</h1>

        <p
          aria-hidden="true"
          class="font-semibold text-danos-primary dark:text-danos-primary-inverted"
        >
          <Prompt /> feeds posts
        </p>

        <br />

        <section>
          <h2 class="sr-only">Posts</h2>

          <p>Subscribe to all posts (main feed):</p>

          <br />

          <ul class="ml-4 space-y-3">
            <li>
              <a href="/posts.rss" class="page-link"
                >{`${config.SITE_DOMAIN}/posts.rss`}</a
              >
            </li>

            <li>
              <a href="/posts.json" class="page-link"
                >{`${config.SITE_DOMAIN}/posts.json`}</a
              >
            </li>
          </ul>
        </section>

        <br />

        <p
          aria-hidden="true"
          class="font-semibold text-danos-primary dark:text-danos-primary-inverted"
        >
          <Prompt /> feeds tag
        </p>

        <br />

        <section>
          <h2 class="sr-only">Tag</h2>

          <p>Subscribe to posts of a specific topic:</p>

          <br />

          <ul class="ml-4 space-y-3">
            <li>
              <code>{`${config.SITE_DOMAIN}/posts/tags/[tag].rss`}</code>
            </li>

            <li>
              <code>{`${config.SITE_DOMAIN}/posts/tags/[tag].json`}</code>
            </li>
          </ul>

          <br />

          <p>
            You can subscribe to any tag listed on the <a
              href="/posts/tags"
              class="page-link">tags</a
            > page. For example:
          </p>

          <br />

          <ul class="ml-4 space-y-3">
            <li>
              <a href="/posts/tags/golang.rss" class="page-link"
                >{`${config.SITE_DOMAIN}/posts/tags/golang.rss`}</a
              >
            </li>

            <li>
              <a href="/posts/tags/til.json" class="page-link"
                >{`${config.SITE_DOMAIN}/posts/tags/til.json`}</a
              >
            </li>
          </ul>
        </section>

        <br />

        <p
          aria-hidden="true"
          class="font-semibold text-danos-primary dark:text-danos-primary-inverted"
        >
          <Prompt /> feeds help
        </p>

        <br />

        <h2 class="sr-only">Tag</h2>

        <p>
          The URLs above are web feeds. Each feed has 2 variants: RSS and JSON.
        </p>

        <br />

        <p>Subscribe to a feed by copying a URL above into your feed reader.</p>

        <p>
          Your reader will then automatically fetch (new) articles from my site!
        </p>

        <br />

        <p>
          You can also try using a URL without the <code>.rss</code> or <code
            >.json</code
          > postfix; your feed reader should automatically choose a format it
          likes best.
        </p>

        <br />

        <p>
          Visit <a href="https://aboutfeeds.com" class="page-link"
            >aboutfeeds.com</a
          > to learn more about RSS feeds and readers.
        </p>

        <p>
          And to learn more about JSON feeds, visit <a
            href="https://www.jsonfeed.org"
            class="page-link">jsonfeed.org</a
          >.
        </p>

        <br />

        <p aria-hidden="true">
          <Prompt />
          <span class="blink">_</span>
        </p>
      </div>
    </div>

    <div
      slot="footer"
      class="flex-1 flex items-center flex-row-reverse gap-5 px-2"
    >
      <div class="flex items-center gap-1 truncate">
        <span class="inline-block truncate" title={footerText}>
          {footerText}
        </span>
      </div>
    </div>
  </Window>
</PageLayout>
