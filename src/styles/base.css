@tailwind base;
@tailwind components;
@tailwind utilities;

/*
See: https://tailwindcss.com/docs/adding-custom-styles#adding-base-styles
*/
@layer base {
  :root {
    /*
    For using CSS vars see:
    https://tailwindcss.com/docs/customizing-colors#using-css-variables
    */

    /* Main theme */
    --color-bg-body: 250 250 250; /* zinc-50 */
    --color-bg-body-inverted: 0 0 0; /* black */
    --color-bg-primary: 255 255 255; /* white */
    --color-bg-primary-inverted: 24 24 27; /* zinc-900 */
    --color-bg-secondary: 244 244 245; /* zinc-100 */
    --color-bg-secondary-inverted: 0 0 0; /* black */
    --color-bg-hover: 250 250 250; /* zinc-50 */
    --color-bg-hover-inverted: 39 39 42; /* zinc-800 */
    --color-text-primary: 39 39 42; /* zinc-800 */
    --color-text-primary-inverted: 228 228 231; /* zinc-200 */
    --color-text-secondary: 82 82 91; /* zinc-600 */
    --color-text-secondary-inverted: 161 161 170; /* zinc-400 */
    --color-text-link: 82 82 91; /* zinc-600 */
    --color-text-link-inverted: 161 161 170; /* zinc-400 */
    --color-text-special: 39 39 42; /* zinc-800 */
    --color-text-special-inverted: 228 228 231; /* zinc-200 */
    --color-text-highlight: 20 184 166; /* teal-500 */
    --color-text-highlight-inverted: 45 212 191; /* teal-400 */
    --color-border-primary: 228 228 231; /* zinc-200 */
    --color-border-primary-inverted: 63 63 70; /* zinc-700 */
    --color-focus-primary: 20 184 166; /* teal-500 */
    --color-focus-primary-inverted: 45 212 191; /* teal-400 */
  }

  @media (prefers-color-scheme: light) {
    :root {
      /* Light syntax highlighting theme for code in posts */
      --astro-code-color-text: #24292e;
      --astro-code-color-background: #fafafa;
      --astro-code-token-constant: #005cc5;
      --astro-code-token-string: #032f62;
      --astro-code-token-comment: #6a737d;
      --astro-code-token-keyword: #d73a49;
      --astro-code-token-parameter: #e36209;
      --astro-code-token-function: #6f42c1;
      --astro-code-token-string-expression: #032f62;
      --astro-code-token-punctuation: #24292e;
      --astro-code-token-link: #0366d6;
    }
  }

  @media (prefers-color-scheme: dark) {
    :root {
      /* Dark syntax highlighting theme for code in posts */
      --astro-code-color-text: #e1e4e8;
      --astro-code-color-background: #27272a;
      --astro-code-token-constant: #79b8ff;
      --astro-code-token-string: #9ecbff;
      --astro-code-token-comment: #6a737d;
      --astro-code-token-keyword: #f97583;
      --astro-code-token-parameter: #ffab70;
      --astro-code-token-function: #b392f0;
      --astro-code-token-string-expression: #9ecbff;
      --astro-code-token-punctuation: #e1e4e8;
      --astro-code-token-link: #79b8ff;
    }

    /* Make images less bright in dark mode */
    img {
      filter: brightness(0.8) contrast(1.2);
    }
  }

  /* Background */

  .pattern-boxes {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgb(161 161 170 / 0.08)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e");
  }

  /* Post styles */

  article :is(h2, h3, h4, h5, h6) {
    @apply flex items-center gap-2 md:flex-row-reverse md:justify-end md:-ml-8;
  }

  article :is(h2, h3, h4, h5, h6) > a {
    @apply p-1 md:opacity-0;
  }

  article :is(h2, h3, h4, h5, h6):hover > a {
    @apply opacity-100;
  }

  blockquote cite p::before {
    content: "\2014" !important;
  }

  blockquote cite p::after {
    content: none !important;
  }

  article :is(h2, h3, h4, h5, h6),
  sup a,
  a[id="introduction"],
  section[data-footnotes] li {
    @apply scroll-mt-12;
  }

  sup a[aria-describedby="footnote-label"] {
    @apply px-[2px] underline-offset-4;
  }

  a[data-indent="1"] {
    @apply pl-4;
  }
  a[data-indent="2"] {
    @apply pl-8;
  }
  a[data-indent="3"] {
    @apply pl-12;
  }
  a[data-indent="4"] {
    @apply pl-16;
  }
  a[data-indent="5"] {
    @apply pl-20;
  }

  table {
    @apply block overflow-x-scroll whitespace-nowrap max-w-fit mx-auto sm:table sm:table-auto sm:whitespace-normal sm:max-w-none;
  }

  img {
    @apply shadow-md;
  }

  .toc-active {
    @apply text-danos-highlight dark:text-danos-highlight-inverted;
  }

  /* Webmentions */
  .wm-reply-content p {
    @apply my-3;
  }

  /* Animations */

  @keyframes blink {
    0% {
      opacity: 0;
    }
    40% {
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
}

/*
See: https://tailwindcss.com/docs/adding-custom-styles#adding-component-classes */
@layer components {
  /* Container styles */

  .page-wrapper {
    @apply px-4 sm:px-8 lg:px-12 my-6 sm:my-12;
  }

  .page-header {
    @apply max-w-2xl;
  }

  .page-content {
    @apply mt-14 sm:mt-16;
  }

  .scroll-x {
    @apply overflow-y-hidden overflow-x-scroll;
    -webkit-overflow-scrolling: touch;
  }

  /* Text styles */

  .nav-text {
    @apply font-sans text-sm text-danos-primary dark:text-danos-primary-inverted;
  }

  .page-heading {
    @apply font-bold tracking-tight text-4xl leading-tight sm:text-5xl sm:leading-tight text-danos-primary dark:text-danos-primary-inverted;
  }

  .page-subheading {
    @apply font-semibold tracking-tight text-base text-danos-primary dark:text-danos-primary-inverted;
  }

  .page-text {
    @apply text-base text-danos-secondary dark:text-danos-secondary-inverted;
  }

  .page-subtext {
    @apply font-sans text-base text-danos-secondary dark:text-danos-secondary-inverted;
  }

  /* Link styles */

  .page-link {
    @apply font-normal underline underline-offset-[5px] decoration-1 text-danos-link dark:text-danos-link-inverted focusable;
  }

  /* Focus styles */

  .focusable {
    @apply focus:outline-none focus:ring-2 focus:ring-offset-0 focus:ring-danos-focus dark:focus:ring-danos-focus-inverted;
  }

  /* Animation styles */

  .blink {
    animation-name: blink;
    animation-duration: 1s;
    animation-timing-function: linear;
    animation-delay: 0.5s;
    animation-iteration-count: infinite;
  }
}
