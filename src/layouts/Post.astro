---
import { FULL_NAME } from "@config"
import PageLayout from "@layouts/Page.astro"
import Tag from "@components/Tag.astro"

import type { Frontmatter } from "@types"

interface Props {
  frontmatter: Frontmatter
  children: any
}

const {
  frontmatter: {
    title,
    description,
    tags,
    publishedAt,
    updatedAt,
    heroImage,
    heroImageAlt,
    readingTime,
  },
} = Astro.props
---

<PageLayout title={title} description={description}>
  <article
    class="mx-auto px-6 my-10 sm:my-20 prose sm:prose-lg prose-slate prose-headings:font-serif dark:prose-invert"
  >
    {
      heroImage && (
        <img width={720} height={360} src={heroImage} alt={heroImageAlt} />
      )
    }

    <h1>{title}</h1>

    <div class="flex flex-col italic">
      {
        publishedAt && (
          <span>
            Posted <time>{publishedAt}</time> by {FULL_NAME}
          </span>
        )
      }

      {
        updatedAt && (
          <span>
            Last updated <time>{updatedAt}</time>
          </span>
        )
      }

      <span>{readingTime}</span>
    </div>

    <p>{description}</p>

    <div class="not-prose">
      <ul class="list-none flex flex-wrap items-center gap-2">
        {
          tags.map((tag) => {
            return (
              <li class="flex">
                <Tag name={tag}>{tag}</Tag>
              </li>
            )
          })
        }
      </ul>
    </div>

    <hr />

    <slot />
  </article>
</PageLayout>
